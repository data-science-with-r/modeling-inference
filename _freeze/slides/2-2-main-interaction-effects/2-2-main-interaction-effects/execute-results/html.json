{
  "hash": "b2fb5f5a0e7b020a93336a5bad5b5591",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Main and interaction effects\"\nformat: revealjs\n---\n\n\n\n## Packages\n\n- **DAAG** for data\n- **tidyverse** for data wrangling and visualization\n- **tidymodels** for modeling\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(DAAG)\nlibrary(tidyverse)\nlibrary(tidymodels)\n```\n:::\n\n\n## Data: Book weight and volume\n\nThe `allbacks` data frame gives measurements on the volume and weights of 15 books, some of which are paperback and some of which are hardback\n\n::: {.columns}\n::: {.column width=40%}\n- `volume` - cubic centimetres\n\n- `area` - square centimetres\n\n- `weight` - grams\n\n- `cover` - `hb` or `pb`\n:::\n::: {.column width=60%}\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 15 × 4\n   volume  area weight cover\n    <dbl> <dbl>  <dbl> <fct>\n 1    885   382    800 hb   \n 2   1016   468    950 hb   \n 3   1125   387   1050 hb   \n 4    239   371    350 hb   \n 5    701   371    750 hb   \n 6    641   367    600 hb   \n 7   1228   396   1075 hb   \n 8    412     0    250 pb   \n 9    953     0    700 pb   \n10    929     0    650 pb   \n11   1492     0    975 pb   \n12    419     0    350 pb   \n13   1010     0    950 pb   \n14    595     0    425 pb   \n15   1034     0    725 pb   \n```\n\n\n:::\n:::\n\n:::\n::: \n\n::: aside\nThese books are from the bookshelf of J. H. Maindonald at Australian National University.\n:::\n\n## Two possible explanations\n\n::: {.columns}\n::: {.column width=70%}\n::: task\nSuppose we want to predict weights of books from their volume and cover type (hardback vs. paperback). Do these visualizations suggest that a model that doesn't allow for the rate of change in weight to vary by cover type (parallel lines) is a better fit or a model that does allow (non-parallel lines)?\n:::\n\n\n::: {.cell layout-ncol=\"2\"}\n::: {.cell-output-display}\n![](2-2-main-interaction-effects_files/figure-revealjs/book-main-int-1.png){width=576}\n:::\n\n::: {.cell-output-display}\n![](2-2-main-interaction-effects_files/figure-revealjs/book-main-int-2.png){width=576}\n:::\n:::\n\n\n:::\n:::\n\n## In pursuit of Occam's razor\n\n::: incremental\n- Occam's Razor states that among competing hypotheses that predict equally well, the one with the fewest assumptions should be selected.\n\n- Model selection follows this principle.\n\n- We only want to add another predictor to the model if the addition of that variable brings something valuable in terms of predictive power to the model.\n\n- In other words, we prefer the simplest best model, i.e. **parsimonious** model.\n:::\n\n## In pursuit of Occam's razor\n\n::: {.columns}\n::: {.column width=70%}\n::: task\nVisually, which of the two models is preferable under Occam's razor?\n:::\n\n\n::: {.cell layout-ncol=\"2\"}\n::: {.cell-output-display}\n![](2-2-main-interaction-effects_files/figure-revealjs/unnamed-chunk-2-1.png){width=576}\n:::\n\n::: {.cell-output-display}\n![](2-2-main-interaction-effects_files/figure-revealjs/unnamed-chunk-2-2.png){width=576}\n:::\n:::\n\n\n:::\n::: \n\n## Model 1: `volume + cover` {.smaller}\n\n**Main effects**: Rate of change for weight as volume increases is the same for hardback and paperback books.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"|1|2|4\"}\nallbacks_main_fit <- linear_reg() |>\n  fit(weight ~ volume + cover, data = allbacks)\n\ntidy(allbacks_main_fit)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 × 5\n  term        estimate std.error statistic      p.value\n  <chr>          <dbl>     <dbl>     <dbl>        <dbl>\n1 (Intercept)  198.      59.2         3.34 0.00584     \n2 volume         0.718    0.0615     11.7  0.0000000660\n3 coverpb     -184.      40.5        -4.55 0.000672    \n```\n\n\n:::\n:::\n\n\n. . .\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglance(allbacks_main_fit)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 12\n  r.squared adj.r.squared sigma statistic     p.value    df\n      <dbl>         <dbl> <dbl>     <dbl>       <dbl> <dbl>\n1     0.927         0.915  78.2      76.7 0.000000145     2\n# ℹ 6 more variables: logLik <dbl>, AIC <dbl>, BIC <dbl>,\n#   deviance <dbl>, df.residual <int>, nobs <int>\n```\n\n\n:::\n:::\n\n\n## Model 2: `volume + cover + volume*cover` {.smaller}\n\n**Interaction effects**: Rate of change for weight as volume increases is different for hardback and paperback books.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"|1|2|4\"}\nallbacks_int_fit <- linear_reg() |>\n  fit(weight ~ volume + cover + volume*cover, data = allbacks)\n\ntidy(allbacks_int_fit)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 × 5\n  term            estimate std.error statistic    p.value\n  <chr>              <dbl>     <dbl>     <dbl>      <dbl>\n1 (Intercept)     162.       86.5        1.87  0.0887    \n2 volume            0.762     0.0972     7.84  0.00000794\n3 coverpb        -120.      116.        -1.04  0.321     \n4 volume:coverpb   -0.0757    0.128     -0.592 0.566     \n```\n\n\n:::\n:::\n\n\n . . .\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglance(allbacks_main_fit)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 12\n  r.squared adj.r.squared sigma statistic     p.value    df\n      <dbl>         <dbl> <dbl>     <dbl>       <dbl> <dbl>\n1     0.927         0.915  78.2      76.7 0.000000145     2\n# ℹ 6 more variables: logLik <dbl>, AIC <dbl>, BIC <dbl>,\n#   deviance <dbl>, df.residual <int>, nobs <int>\n```\n\n\n:::\n:::\n\n\n## R's got your back!\n\nWhen you add an interaction effect to a model, R will always add the main effects of those variables too, even if you leave them out of your model formula:\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"|2\"}\nlinear_reg() |>\n  fit(weight ~ volume*cover, data = allbacks) |>\n  tidy()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 × 5\n  term            estimate std.error statistic    p.value\n  <chr>              <dbl>     <dbl>     <dbl>      <dbl>\n1 (Intercept)     162.       86.5        1.87  0.0887    \n2 volume            0.762     0.0972     7.84  0.00000794\n3 coverpb        -120.      116.        -1.04  0.321     \n4 volume:coverpb   -0.0757    0.128     -0.592 0.566     \n```\n\n\n:::\n:::\n\n\n## Choosing between models {.smaller}\n\nThe model with the interaction effects has more predictors, and remember that when comparing models with different numbers of predictors, we use adjusted $R^2$ for model selection:\n\n::: columns\n::: {.column width=35%}\n\n$R^2$:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglance(allbacks_main_fit)$r.squared\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.9274776\n```\n\n\n:::\n\n```{.r .cell-code}\nglance(allbacks_int_fit)$r.squared\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.9297137\n```\n\n\n:::\n:::\n\n:::\n::: {.column width=35%}\n\nAdjusted $R^2$:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglance(allbacks_main_fit)$adj.r.squared\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.9153905\n```\n\n\n:::\n\n```{.r .cell-code}\nglance(allbacks_int_fit)$adj.r.squared\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.9105447\n```\n\n\n:::\n:::\n\n:::\n:::\n\n. . .\n\n- $R^2$ is higher for the model with the interaction effect.\n\n- Adjusted $R^2$ is **not** higher for the model with the interaction effect, therefore we do **not** need the interaction effect, the main effects model is good enough!\n",
    "supporting": [
      "2-2-main-interaction-effects_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}